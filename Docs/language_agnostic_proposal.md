# Language Agnistic

Мы хотим использовать `SurfGen` в качестве генератора как минимум для 2х платформ и ЯП - iOS (Swift), Flutter (Dart2). Для этого необходимы определенные изменения в работе генератора. 

Предлагаю следующую структуру:

![](./lang_agn_prop.pdf)

**Основная идея: Правила генерации определяются набором шаблонов, а не генератором. Генератор лишь преобразует AST дерево спецификации в формализованную структуру данных, чтобы передать эти данные в шаблоны.**

Механика работы:
- `Generic Code Generator` преобразует `GAST` дерево в определенную структуру данных. Например в такую (пример на коленке):
```swift
struct Api {
    struct Method {
        struct QueryParam {
            let name: String
            let type: String
            let description: String
        }

        let urlTemplate: String
        let queryParams: [QueryParam]
        let bodyType: String
        let httpMethod: String
        let description: String
        let headers: [String: String]
    }

    let methods: [Method]
}
```
- `Generic Code Generator` получает на вход список шаблонов
- `Generic Code Generator` передает полученную выше стрктуру данных в каждый из переданных ему шаблонов

Таким образом, язык и платформу определяют шаблоны. 

--

Ровно по тому же принципу необходимо переписать генератор моделей

--

Испульзуя такой архитектурных подход мы:
- Переносим ответственность по описанию логики генерации на пользователей, а следвоательно снимаем с них ограничения
- Сохраняем исходную гибкость архитектуры, так как все еще можем написать кастомный генератор и использовать его
